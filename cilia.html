<!-- Add this after the existing JavaScript but before the closing script tag -->

// === QUOTE MANAGEMENT SYSTEM ===
class QuoteManager {
    constructor() {
        this.quotes = [];
        this.loadQuotes();
    }

    loadQuotes() {
        // 30+ educational and motivational quotes
        this.quotes = [
            {
                text: "Education is the most powerful weapon which you can use to change the world.",
                author: "Nelson Mandela",
                title: "Change the World üåç"
            },
            {
                text: "The beautiful thing about learning is that no one can take it away from you.",
                author: "B.B. King",
                title: "Keep Learning üìö"
            },
            {
                text: "The function of education is to teach one to think intensively and to think critically. Intelligence plus character ‚Äì that is the goal of true education.",
                author: "Martin Luther King Jr.",
                title: "Think Critically üß†"
            },
            {
                text: "Live as if you were to die tomorrow. Learn as if you were to live forever.",
                author: "Mahatma Gandhi",
                title: "Live & Learn üí´"
            },
            {
                text: "Education is not preparation for life; education is life itself.",
                author: "John Dewey",
                title: "Education is Life üéì"
            },
            {
                text: "The roots of education are bitter, but the fruit is sweet.",
                author: "Aristotle",
                title: "Sweet Fruits üçé"
            },
            {
                text: "Education is the key to unlocking the world, a passport to freedom.",
                author: "Oprah Winfrey",
                title: "Unlock Freedom üîë"
            },
            {
                text: "The mind is not a vessel to be filled, but a fire to be kindled.",
                author: "Plutarch",
                title: "Kindle Minds üî•"
            },
            {
                text: "Develop a passion for learning. If you do, you will never cease to grow.",
                author: "Anthony J. D'Angelo",
                title: "Grow Passionately üå±"
            },
            {
                text: "Education is not the filling of a pail, but the lighting of a fire.",
                author: "William Butler Yeats",
                title: "Light the Fire üïØÔ∏è"
            },
            {
                text: "The capacity to learn is a gift; the ability to learn is a skill; the willingness to learn is a choice.",
                author: "Brian Herbert",
                title: "Choose to Learn ü§î"
            },
            {
                text: "Education is the movement from darkness to light.",
                author: "Allan Bloom",
                title: "From Darkness to Light ‚òÄÔ∏è"
            },
            {
                text: "Learning is not attained by chance, it must be sought for with ardor and diligence.",
                author: "Abigail Adams",
                title: "Seek Diligently üîç"
            },
            {
                text: "The more that you read, the more things you will know. The more that you learn, the more places you'll go.",
                author: "Dr. Seuss",
                title: "Read & Explore üåé"
            },
            {
                text: "Education breeds confidence. Confidence breeds hope. Hope breeds peace.",
                author: "Confucius",
                title: "Breed Peace ‚úåÔ∏è"
            },
            {
                text: "Knowledge is power. Information is liberating. Education is the premise of progress, in every society, in every family.",
                author: "Kofi Annan",
                title: "Power of Knowledge üí™"
            },
            {
                text: "The aim of education should be to teach us how to think, rather than what to think.",
                author: "James Beattie",
                title: "Teach Thinking ü§î"
            },
            {
                text: "Education is not just about going to school and getting a degree. It's about widening your knowledge and absorbing the truth about life.",
                author: "Shakuntala Devi",
                title: "Widen Knowledge üìñ"
            },
            {
                text: "Don't let what you cannot do interfere with what you can do.",
                author: "John Wooden",
                title: "Focus on Ability ‚ú®"
            },
            {
                text: "Success is not the key to happiness. Happiness is the key to success.",
                author: "Albert Schweitzer",
                title: "Find Happiness üòä"
            },
            {
                text: "The only person who is educated is the one who has learned how to learn and change.",
                author: "Carl Rogers",
                title: "Learn to Change üîÑ"
            },
            {
                text: "Wisdom is not a product of schooling but of the lifelong attempt to acquire it.",
                author: "Albert Einstein",
                title: "Seek Wisdom ü¶â"
            },
            {
                text: "Education is the foundation upon which we build our future.",
                author: "Christine Gregoire",
                title: "Build Foundation üèóÔ∏è"
            },
            {
                text: "Your education is a dress rehearsal for a life that is yours to lead.",
                author: "Nora Ephron",
                title: "Dress Rehearsal üé≠"
            },
            {
                text: "The beautiful thing about learning is that you can never exhaust it.",
                author: "Unknown",
                title: "Endless Learning ‚ôæÔ∏è"
            },
            {
                text: "Education is the best provision for old age.",
                author: "Aristotle",
                title: "Plan Ahead üëµüë¥"
            },
            {
                text: "A well-educated mind will always have more questions than answers.",
                author: "Helen Keller",
                title: "Ask Questions ‚ùì"
            },
            {
                text: "The journey of a thousand miles begins with a single step.",
                author: "Lao Tzu",
                title: "Start Your Journey üö∂"
            },
            {
                text: "Believe you can and you're halfway there.",
                author: "Theodore Roosevelt",
                title: "Believe & Achieve üéØ"
            },
            {
                text: "The future belongs to those who believe in the beauty of their dreams.",
                author: "Eleanor Roosevelt",
                title: "Dream Big üí≠"
            },
            {
                text: "Education is not received. It is achieved.",
                author: "Unknown",
                title: "Achieve Education üèÜ"
            },
            {
                text: "Learning is a treasure that will follow its owner everywhere.",
                author: "Chinese Proverb",
                title: "Treasure Learning üíé"
            },
            {
                text: "The expert in anything was once a beginner.",
                author: "Helen Hayes",
                title: "Start Beginner üë∂"
            },
            {
                text: "Education is the ability to listen to almost anything without losing your temper.",
                author: "Robert Frost",
                title: "Listen Calmly üëÇ"
            },
            {
                text: "You don't have to be great to start, but you have to start to be great.",
                author: "Zig Ziglar",
                title: "Start Now üöÄ"
            },
            {
                text: "The only true wisdom is in knowing you know nothing.",
                author: "Socrates",
                title: "Wisdom in Humility üôá"
            },
            {
                text: "Success is stumbling from failure to failure with no loss of enthusiasm.",
                author: "Winston Churchill",
                title: "Persist with Enthusiasm üí•"
            },
            {
                text: "Don't watch the clock; do what it does. Keep going.",
                author: "Sam Levenson",
                title: "Keep Going ‚è∞"
            },
            {
                text: "The secret of getting ahead is getting started.",
                author: "Mark Twain",
                title: "Get Started üèÅ"
            },
            {
                text: "Quality is not an act, it is a habit.",
                author: "Aristotle",
                title: "Build Habits üìù"
            }
        ];
    }

    getRandomQuote() {
        return this.quotes[Math.floor(Math.random() * this.quotes.length)];
    }

    getQuoteByIndex(index) {
        return this.quotes[index % this.quotes.length];
    }

    getAllQuotes() {
        return this.quotes;
    }

    getQuoteCount() {
        return this.quotes.length;
    }
}

// Initialize quote manager
const quoteManager = new QuoteManager();

// === ENHANCED WELCOME BANNER WITH QUOTES ===
let currentQuoteIndex = 0;
const quoteSlideshowInterval = 8000; // 8 seconds per quote

function initQuoteSlideshow() {
    // Clear existing slides
    const welcomeBanner = document.querySelector('.welcome-banner');
    const existingSlides = welcomeBanner.querySelectorAll('.banner-slide');
    existingSlides.forEach(slide => slide.remove());

    // Create slides for all quotes
    const quotes = quoteManager.getAllQuotes();
    quotes.forEach((quote, index) => {
        const slide = document.createElement('div');
        slide.className = `banner-slide ${index === 0 ? 'active' : ''}`;
        slide.id = `quote-slide-${index}`;
        slide.innerHTML = `
            <h2>${quote.title}</h2>
            <p>"${quote.text}"</p>
            <span class="quote-author">- ${quote.author}</span>
        `;
        welcomeBanner.appendChild(slide);
    });

    // Start slideshow
    startQuoteSlideshow();
}

function showQuoteSlide(index) {
    const slides = document.querySelectorAll('.banner-slide');
    const totalSlides = slides.length;
    
    if (totalSlides === 0) return;
    
    currentQuoteIndex = (index + totalSlides) % totalSlides;
    
    slides.forEach((slide, i) => {
        slide.classList.remove('active');
        if (i === currentQuoteIndex) {
            slide.classList.add('active');
        }
    });
}

function nextQuoteSlide() {
    showQuoteSlide(currentQuoteIndex + 1);
}

function previousQuoteSlide() {
    showQuoteSlide(currentQuoteIndex - 1);
}

let quoteInterval;

function startQuoteSlideshow() {
    stopQuoteSlideshow();
    quoteInterval = setInterval(nextQuoteSlide, quoteSlideshowInterval);
}

function stopQuoteSlideshow() {
    if (quoteInterval) {
        clearInterval(quoteInterval);
        quoteInterval = null;
    }
}

// Add manual navigation buttons to welcome banner
function addQuoteNavigation() {
    const welcomeBanner = document.querySelector('.welcome-banner');
    
    // Remove existing navigation if any
    const existingNav = welcomeBanner.querySelector('.quote-nav');
    if (existingNav) existingNav.remove();
    
    // Create navigation container
    const nav = document.createElement('div');
    nav.className = 'quote-nav';
    nav.style.cssText = `
        position: absolute;
        bottom: 20px;
        left: 0;
        right: 0;
        display: flex;
        justify-content: center;
        gap: 10px;
        z-index: 10;
    `;
    
    // Create previous button
    const prevBtn = document.createElement('button');
    prevBtn.innerHTML = '‚óÄ';
    prevBtn.style.cssText = `
        background: rgba(255,255,255,0.3);
        border: none;
        color: white;
        width: 40px;
        height: 40px;
        border-radius: 50%;
        cursor: pointer;
        font-size: 1.2rem;
        backdrop-filter: blur(10px);
        transition: all 0.3s;
    `;
    prevBtn.onmouseenter = () => prevBtn.style.background = 'rgba(255,255,255,0.5)';
    prevBtn.onmouseleave = () => prevBtn.style.background = 'rgba(255,255,255,0.3)';
    prevBtn.onclick = (e) => {
        e.stopPropagation();
        previousQuoteSlide();
        startQuoteSlideshow();
    };
    
    // Create pause/play button
    const playBtn = document.createElement('button');
    playBtn.innerHTML = '‚è∏';
    playBtn.style.cssText = `
        background: rgba(255,255,255,0.3);
        border: none;
        color: white;
        width: 40px;
        height: 40px;
        border-radius: 50%;
        cursor: pointer;
        font-size: 1.2rem;
        backdrop-filter: blur(10px);
        transition: all 0.3s;
    `;
    playBtn.onmouseenter = () => playBtn.style.background = 'rgba(255,255,255,0.5)';
    playBtn.onmouseleave = () => playBtn.style.background = 'rgba(255,255,255,0.3)';
    playBtn.onclick = (e) => {
        e.stopPropagation();
        if (quoteInterval) {
            stopQuoteSlideshow();
            playBtn.innerHTML = '‚ñ∂';
        } else {
            startQuoteSlideshow();
            playBtn.innerHTML = '‚è∏';
        }
    };
    
    // Create next button
    const nextBtn = document.createElement('button');
    nextBtn.innerHTML = '‚ñ∂';
    nextBtn.style.cssText = `
        background: rgba(255,255,255,0.3);
        border: none;
        color: white;
        width: 40px;
        height: 40px;
        border-radius: 50%;
        cursor: pointer;
        font-size: 1.2rem;
        backdrop-filter: blur(10px);
        transition: all 0.3s;
    `;
    nextBtn.onmouseenter = () => nextBtn.style.background = 'rgba(255,255,255,0.5)';
    nextBtn.onmouseleave = () => nextBtn.style.background = 'rgba(255,255,255,0.3)';
    nextBtn.onclick = (e) => {
        e.stopPropagation();
        nextQuoteSlide();
        startQuoteSlideshow();
    };
    
    // Create quote counter
    const counter = document.createElement('div');
    counter.style.cssText = `
        color: white;
        font-size: 0.9rem;
        display: flex;
        align-items: center;
        padding: 0 15px;
        background: rgba(0,0,0,0.2);
        border-radius: 20px;
        backdrop-filter: blur(10px);
        font-weight: 600;
    `;
    counter.innerHTML = `Quote: <span id="quote-counter">1</span>/${quoteManager.getQuoteCount()}`;
    
    // Add to navigation
    nav.appendChild(prevBtn);
    nav.appendChild(playBtn);
    nav.appendChild(counter);
    nav.appendChild(nextBtn);
    welcomeBanner.appendChild(nav);
}

// Update quote counter
function updateQuoteCounter() {
    const counter = document.getElementById('quote-counter');
    if (counter) {
        counter.textContent = currentQuoteIndex + 1;
    }
}

// === QUOTE MODAL VIEWER ===
function showAllQuotesModal() {
    const modal = document.createElement('div');
    modal.id = 'quotes-modal';
    modal.style.cssText = `
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(0,0,0,0.9);
        backdrop-filter: blur(20px);
        z-index: 9999;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        padding: 20px;
        overflow-y: auto;
    `;
    
    const content = document.createElement('div');
    content.style.cssText = `
        background: var(--white);
        border-radius: 20px;
        padding: 2rem;
        max-width: 800px;
        width: 100%;
        max-height: 80vh;
        overflow-y: auto;
        box-shadow: 0 20px 60px rgba(0,0,0,0.3);
    `;
    
    const header = document.createElement('div');
    header.style.cssText = `
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 2rem;
        padding-bottom: 1rem;
        border-bottom: 2px solid var(--primary-light);
    `;
    
    header.innerHTML = `
        <h2 style="color: var(--primary-green); font-size: 1.8rem;">
            üìö ${quoteManager.getQuoteCount()} Inspirational Quotes
        </h2>
        <button onclick="closeQuotesModal()" style="
            background: var(--primary-green);
            color: white;
            border: none;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 1.5rem;
        ">√ó</button>
    `;
    
    const quotesGrid = document.createElement('div');
    quotesGrid.style.cssText = `
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
        gap: 1.5rem;
        margin-top: 1rem;
    `;
    
    quoteManager.getAllQuotes().forEach((quote, index) => {
        const quoteCard = document.createElement('div');
        quoteCard.style.cssText = `
            background: ${index === currentQuoteIndex ? 'var(--primary-light)' : 'var(--light-gray)'};
            padding: 1.5rem;
            border-radius: 16px;
            border-left: 4px solid var(--primary-green);
            box-shadow: 0 4px 12px rgba(0,0,0,0.08);
            transition: all 0.3s ease;
            cursor: pointer;
        `;
        quoteCard.onmouseenter = () => quoteCard.style.transform = 'translateY(-5px)';
        quoteCard.onmouseleave = () => quoteCard.style.transform = 'translateY(0)';
        quoteCard.onclick = () => {
            showQuoteSlide(index);
            closeQuotesModal();
            startQuoteSlideshow();
        };
        
        quoteCard.innerHTML = `
            <div style="display: flex; align-items: flex-start; gap: 10px; margin-bottom: 10px;">
                <span style="
                    background: var(--primary-green);
                    color: white;
                    width: 30px;
                    height: 30px;
                    border-radius: 50%;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    font-weight: bold;
                    flex-shrink: 0;
                ">${index + 1}</span>
                <h3 style="color: var(--text-dark); font-size: 1.1rem; margin: 0;">${quote.title}</h3>
            </div>
            <p style="color: var(--text-medium); font-style: italic; margin: 10px 0; line-height: 1.6;">
                "${quote.text}"
            </p>
            <p style="color: var(--primary-green); font-weight: 600; text-align: right; margin-top: 10px;">
                - ${quote.author}
            </p>
        `;
        
        quotesGrid.appendChild(quoteCard);
    });
    
    content.appendChild(header);
    content.appendChild(quotesGrid);
    modal.appendChild(content);
    document.body.appendChild(modal);
}

function closeQuotesModal() {
    const modal = document.getElementById('quotes-modal');
    if (modal) {
        modal.remove();
    }
}

// Add "View All Quotes" button to welcome banner
function addViewAllQuotesButton() {
    const welcomeBanner = document.querySelector('.welcome-banner');
    
    // Remove existing button if any
    const existingBtn = welcomeBanner.querySelector('.view-all-quotes-btn');
    if (existingBtn) existingBtn.remove();
    
    const button = document.createElement('button');
    button.className = 'view-all-quotes-btn';
    button.style.cssText = `
        position: absolute;
        top: 20px;
        left: 20px;
        background: rgba(255,255,255,0.2);
        backdrop-filter: blur(10px);
        border: 2px solid rgba(255,255,255,0.3);
        color: white;
        padding: 8px 16px;
        border-radius: 20px;
        font-size: 0.8rem;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s;
        z-index: 10;
        display: flex;
        align-items: center;
        gap: 5px;
    `;
    button.onmouseenter = () => {
        button.style.background = 'rgba(255,255,255,0.3)';
        button.style.borderColor = 'rgba(255,255,255,0.5)';
    };
    button.onmouseleave = () => {
        button.style.background = 'rgba(255,255,255,0.2)';
        button.style.borderColor = 'rgba(255,255,255,0.3)';
    };
    button.onclick = showAllQuotesModal;
    
    button.innerHTML = 'üìö View All Quotes';
    welcomeBanner.appendChild(button);
}

// === RANDOM QUOTE OF THE DAY ===
function getQuoteOfTheDay() {
    const today = new Date();
    const dayOfYear = Math.floor((today - new Date(today.getFullYear(), 0, 0)) / 1000 / 60 / 60 / 24);
    const index = dayOfYear % quoteManager.getQuoteCount();
    return quoteManager.getQuoteByIndex(index);
}

function displayQuoteOfTheDay() {
    const quote = getQuoteOfTheDay();
    const quoteDisplay = document.createElement('div');
    quoteDisplay.id = 'quote-of-day';
    quoteDisplay.style.cssText = `
        background: linear-gradient(135deg, var(--primary-green), var(--dark-green));
        color: white;
        padding: 15px;
        border-radius: 12px;
        margin: 1rem 0;
        box-shadow: 0 4px 12px rgba(11, 143, 74, 0.3);
        position: relative;
        overflow: hidden;
    `;
    
    quoteDisplay.innerHTML = `
        <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 8px;">
            <span style="font-size: 1.2rem;">‚≠ê</span>
            <h3 style="margin: 0; font-size: 1rem;">Quote of the Day</h3>
        </div>
        <p style="font-style: italic; margin-bottom: 8px; line-height: 1.5;">
            "${quote.text}"
        </p>
        <p style="text-align: right; font-weight: 600; font-size: 0.9rem;">
            - ${quote.author}
        </p>
    `;
    
    // Insert at the beginning of main content
    const main = document.querySelector('main');
    const firstChild = main.firstChild;
    main.insertBefore(quoteDisplay, firstChild);
}

// === UPDATE EXISTING FUNCTIONS ===

// Update toggleMenu function
function toggleMenu() {
    document.getElementById('menu-overlay').classList.toggle('active');
}

function closeMenuOnOverlay(event) {
    if (event.target.id === 'menu-overlay') {
        toggleMenu();
    }
}

function toggleSearch() {
    const modal = document.getElementById('search-modal');
    modal.classList.toggle('active');
    if (modal.classList.contains('active')) {
        document.getElementById('searchInput').focus();
    }
}

function closeSearchOnOverlay(event) {
    if (event.target.id === 'search-modal') {
        toggleSearch();
    }
}

function handleSearch(event) {
    if (event.key === 'Enter') {
        performSearch();
    }
}

// Add quote-related functions to global scope
window.showAllQuotesModal = showAllQuotesModal;
window.closeQuotesModal = closeQuotesModal;

// === INITIALIZATION ===
document.addEventListener('DOMContentLoaded', function() {
    // Initialize quote system
    initQuoteSlideshow();
    addQuoteNavigation();
    addViewAllQuotesButton();
    displayQuoteOfTheDay();
    
    // Update counter when slide changes
    const observer = new MutationObserver(function(mutations) {
        mutations.forEach(function(mutation) {
            if (mutation.attributeName === 'class') {
                updateQuoteCounter();
            }
        });
    });
    
    const slides = document.querySelectorAll('.banner-slide');
    slides.forEach(slide => {
        observer.observe(slide, { attributes: true });
    });
    
    // Pause slideshow when hovering
    const welcomeBanner = document.querySelector('.welcome-banner');
    welcomeBanner.addEventListener('mouseenter', stopQuoteSlideshow);
    welcomeBanner.addEventListener('mouseleave', startQuoteSlideshow);
    
    // Add keyboard navigation for quotes
    document.addEventListener('keydown', function(e) {
        if (e.key === 'ArrowLeft') {
            previousQuoteSlide();
            startQuoteSlideshow();
        } else if (e.key === 'ArrowRight') {
            nextQuoteSlide();
            startQuoteSlideshow();
        } else if (e.key === ' ' || e.key === 'Spacebar') {
            e.preventDefault();
            if (quoteInterval) {
                stopQuoteSlideshow();
            } else {
                startQuoteSlideshow();
            }
        } else if (e.key === 'q' && e.ctrlKey) {
            e.preventDefault();
            showAllQuotesModal();
        }
    });
    
    // Add quote count to stats banner
    const statsBanner = document.querySelector('.stats-banner');
    if (statsBanner) {
        const quoteStat = document.createElement('div');
        quoteStat.className = 'stat-item';
        quoteStat.innerHTML = `
            <span class="stat-number">${quoteManager.getQuoteCount()}+</span>
            <span class="stat-label">Quotes</span>
        `;
        statsBanner.appendChild(quoteStat);
    }
});

// === ADMIN PANEL FUNCTIONS ===
function openAdminModal(type) {
    const modal = document.getElementById('admin-modal');
    const title = document.getElementById('admin-modal-title');
    const content = document.getElementById('admin-modal-content');
    
    const modals = {
        'users': {
            title: 'üë• User Management',
            html: `
                <div style="margin-bottom: 1rem;">
                    <h4>Manage System Users</h4>
                    <select style="width: 100%; padding: 10px; margin-bottom: 10px;">
                        <option>All Users (512)</option>
                        <option>Students (480)</option>
                        <option>Teachers (48)</option>
                        <option>Parents (300+)</option>
                    </select>
                    <button onclick="showNotification('User management would open here')" style="width: 100%; padding: 10px; background: var(--primary-green); color: white; border: none; border-radius: 8px; margin-top: 10px;">Open User Manager</button>
                </div>
            `
        },
        'content': {
            title: '‚úÖ Content Approval',
            html: `
                <div style="margin-bottom: 1rem;">
                    <h4>Pending Approvals: 12</h4>
                    <p>New videos uploaded by teachers:</p>
                    <ul style="margin: 10px 0; padding-left: 20px;">
                        <li>Math Lesson - Grade 5</li>
                        <li>Science Experiment - JHS 2</li>
                        <li>English Grammar - Grade 4</li>
                    </ul>
                    <button onclick="showNotification('Content approved successfully')" style="width: 100%; padding: 10px; background: var(--primary-green); color: white; border: none; border-radius: 8px; margin-top: 10px;">Approve All</button>
                </div>
            `
        },
        'analytics': {
            title: 'üìä System Analytics',
            html: `
                <div style="margin-bottom: 1rem;">
                    <h4>Platform Statistics</h4>
                    <div style="display: grid; gap: 10px; margin: 10px 0;">
                        <div>Daily Active Users: <strong>428</strong></div>
                        <div>Total Video Views: <strong>12,847</strong></div>
                        <div>Quiz Completions: <strong>3,284</strong></div>
                        <div>Storage Used: <strong>42.8 GB</strong></div>
                    </div>
                    <button onclick="showNotification('Analytics report generated')" style="width: 100%; padding: 10px; background: var(--primary-green); color: white; border: none; border-radius: 8px; margin-top: 10px;">Generate Report</button>
                </div>
            `
        },
        'broadcast': {
            title: 'üì¢ Broadcast Message',
            html: `
                <div style="margin-bottom: 1rem;">
                    <h4>Send Announcement</h4>
                    <input type="text" placeholder="Message title" style="width: 100%; padding: 10px; margin-bottom: 10px;">
                    <textarea placeholder="Message content" style="width: 100%; padding: 10px; margin-bottom: 10px; height: 100px;"></textarea>
                    <select style="width: 100%; padding: 10px; margin-bottom: 10px;">
                        <option>All Users</option>
                        <option>Students Only</option>
                        <option>Parents Only</option>
                        <option>Staff Only</option>
                    </select>
                    <button onclick="showNotification('Broadcast sent to all users')" style="width: 100%; padding: 10px; background: var(--primary-green); color: white; border: none; border-radius: 8px; margin-top: 10px;">Send Broadcast</button>
                </div>
            `
        },
        'backup': {
            title: 'üíæ System Backup',
            html: `
                <div style="margin-bottom: 1rem;">
                    <h4>Backup & Restore</h4>
                    <p>Last backup: 2 hours ago</p>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin: 10px 0;">
                        <button onclick="showNotification('Backup started successfully')" style="padding: 10px; background: var(--primary-green); color: white; border: none; border-radius: 8px;">Backup Now</button>
                        <button onclick="showNotification('Restore process started')" style="padding: 10px; background: var(--warning); color: white; border: none; border-radius: 8px;">Restore</button>
                    </div>
                </div>
            `
        },
        'settings': {
            title: '‚öôÔ∏è System Settings',
            html: `
                <div style="margin-bottom: 1rem;">
                    <h4>Platform Configuration</h4>
                    <div style="display: grid; gap: 10px;">
                        <label><input type="checkbox"> Maintenance Mode</label>
                        <label><input type="checkbox" checked> Email Notifications</label>
                        <label><input type="checkbox" checked> Auto-backup</label>
                        <label><input type="checkbox"> Debug Mode</label>
                    </div>
                    <button onclick="showNotification('Settings saved successfully')" style="width: 100%; padding: 10px; background: var(--primary-green); color: white; border: none; border-radius: 8px; margin-top: 10px;">Save Settings</button>
                </div>
            `
        }
    };
    
    if (modals[type]) {
        title.textContent = modals[type].title;
        content.innerHTML = modals[type].html;
        modal.style.display = 'flex';
    }
}

function closeAdminModal() {
    document.getElementById('admin-modal').style.display = 'none';
}

// === CHAT SYSTEM ===
let chatMessages = [];
let unreadCount = 0;

function toggleChat() {
    const chatContainer = document.getElementById('chatContainer');
    chatContainer.classList.toggle('active');
    
    if (chatContainer.classList.contains('active')) {
        unreadCount = 0;
        document.getElementById('unreadCount').textContent = '0';
    }
}

function sendMessage() {
    const input = document.getElementById('chatInput');
    const message = input.value.trim();
    
    if (message) {
        addMessage(message, 'user');
        input.value = '';
        
        // Auto-reply from developer
        setTimeout(() => {
            const replies = [
                "Thanks for your message! How can I help you today?",
                "I'll forward your query to the appropriate department.",
                "That's a great question! Let me find the right information for you.",
                "I've noted your concern and will get back to you shortly.",
                "Is there anything specific about the platform you'd like to know?"
            ];
            const randomReply = replies[Math.floor(Math.random() * replies.length)];
            addMessage(randomReply, 'developer');
        }, 1000);
    }
}

function addMessage(text, sender) {
    const messagesContainer = document.getElementById('chatMessages');
    const messageDiv = document.createElement('div');
    messageDiv.className = `message ${sender}`;
    
    const time = new Date().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
    
    messageDiv.innerHTML = `
        <div class="message-sender">${sender === 'user' ? 'You' : 'Developer'}</div>
        <div>${text}</div>
        <div class="message-time">${time}</div>
    `;
    
    messagesContainer.appendChild(messageDiv);
    messagesContainer.scrollTop = messagesContainer.scrollHeight;
    
    // Update unread count if chat is closed
    if (!document.getElementById('chatContainer').classList.contains('active') && sender === 'developer') {
        unreadCount++;
        document.getElementById('unreadCount').textContent = unreadCount;
    }
}

function handleChatInput(event) {
    if (event.key === 'Enter') {
        sendMessage();
    }
}

// Initialize admin chat controls (visible only in admin panel)
function initAdminChatControls() {
    const adminPanel = document.getElementById('admin-panel');
    if (adminPanel) {
        document.getElementById('adminChatControls').classList.add('active');
    }
}

// === PERFORM SEARCH FUNCTION ===
function performSearch() {
    const searchTerm = document.getElementById('searchInput').value;
    if (searchTerm.trim()) {
        // Search in quotes
        const foundQuotes = quoteManager.getAllQuotes().filter(quote => 
            quote.text.toLowerCase().includes(searchTerm.toLowerCase()) ||
            quote.author.toLowerCase().includes(searchTerm.toLowerCase())
        );
        
        if (foundQuotes.length > 0) {
            const quoteList = foundQuotes.map((quote, i) => 
                `${i + 1}. "${quote.text}" - ${quote.author}`
            ).join('\n');
            
            showNotification(`Found ${foundQuotes.length} quotes matching "${searchTerm}":\n\n${quoteList}`);
        } else {
            showNotification(`Searching for: "${searchTerm}"\n\nNo quotes found. Searching other content...`);
        }
        
        toggleSearch();
    }
}

// Call initialization when page loads
setTimeout(() => {
    initQuoteSlideshow();
    addQuoteNavigation();
    addViewAllQuotesButton();
    displayQuoteOfTheDay();
    initAdminChatControls();
}, 1000);
</script>
</body>
</html>
