<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EduTrack • Smart Report Card Generator</title>
    <meta name="description" content="Generate professional student report cards with automatic grading system">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #FF6B00;
            --primary-dark: #e05e00;
            --secondary: #003366;
            --accent: #10b981;
            --light: #f8fafc;
            --gray: #e2e8f0;
            --dark: #1e293b;
            --danger: #ef4444;
            --warning: #f59e0b;
            --success: #10b981;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
            color: var(--dark);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }
        
        /* HEADER */
        header {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            padding: 2.5rem 2rem;
            text-align: center;
            position: relative;
            overflow: hidden;
        }
        
        header::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" preserveAspectRatio="none"><path fill="rgba(255,255,255,0.05)" d="M0,0 L100,0 L100,100 Z"/></svg>');
            background-size: cover;
        }
        
        .logo {
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 1rem;
        }
        
        .logo-icon {
            background: white;
            color: var(--primary);
            width: 50px;
            height: 50px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.8rem;
            margin-right: 15px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }
        
        .logo h1 {
            font-family: 'Poppins', sans-serif;
            font-size: 2.5rem;
            font-weight: 700;
        }
        
        .header-subtitle {
            font-size: 1.1rem;
            opacity: 0.9;
            max-width: 600px;
            margin: 0 auto;
            line-height: 1.6;
        }
        
        /* MAIN CONTENT */
        .main-content {
            display: flex;
            min-height: 700px;
        }
        
        .form-section {
            flex: 1;
            padding: 2.5rem;
            background: var(--light);
            border-right: 1px solid var(--gray);
        }
        
        .preview-section {
            flex: 1;
            padding: 2.5rem;
            background: white;
            display: flex;
            flex-direction: column;
        }
        
        .section-title {
            font-family: 'Poppins', sans-serif;
            font-size: 1.8rem;
            margin-bottom: 1.5rem;
            color: var(--secondary);
            display: flex;
            align-items: center;
        }
        
        .section-title i {
            margin-right: 10px;
            color: var(--primary);
        }
        
        /* FORM STYLES */
        .form-group {
            margin-bottom: 1.5rem;
        }
        
        label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 600;
            color: var(--dark);
        }
        
        input, select {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid var(--gray);
            border-radius: 10px;
            font-size: 1rem;
            font-family: 'Inter', sans-serif;
            transition: all 0.3s;
        }
        
        input:focus, select:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(255, 107, 0, 0.1);
        }
        
        .form-row {
            display: flex;
            gap: 1rem;
        }
        
        .form-row .form-group {
            flex: 1;
        }
        
        .subject-row {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1rem;
            padding: 1rem;
            background: white;
            border-radius: 10px;
            border: 1px solid var(--gray);
        }
        
        .subject-name {
            flex: 2;
        }
        
        .subject-marks {
            flex: 1;
        }
        
        .add-subject {
            background: var(--light);
            border: 2px dashed var(--gray);
            color: var(--secondary);
            padding: 12px;
            border-radius: 10px;
            font-weight: 600;
            cursor: pointer;
            text-align: center;
            transition: all 0.3s;
            margin-top: 10px;
        }
        
        .add-subject:hover {
            border-color: var(--primary);
            color: var(--primary);
        }
        
        .remove-subject {
            background: var(--danger);
            color: white;
            border: none;
            border-radius: 6px;
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: background 0.3s;
        }
        
        .remove-subject:hover {
            background: #dc2626;
        }
        
        /* BUTTONS */
        .btn {
            padding: 14px 28px;
            border-radius: 10px;
            font-weight: 600;
            font-size: 1rem;
            border: none;
            cursor: pointer;
            transition: all 0.3s;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }
        
        .btn-primary {
            background: var(--primary);
            color: white;
        }
        
        .btn-primary:hover {
            background: var(--primary-dark);
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(255, 107, 0, 0.2);
        }
        
        .btn-secondary {
            background: var(--secondary);
            color: white;
        }
        
        .btn-secondary:hover {
            background: #00264d;
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(0, 51, 102, 0.2);
        }
        
        .btn-outline {
            background: transparent;
            color: var(--secondary);
            border: 2px solid var(--secondary);
        }
        
        .btn-outline:hover {
            background: var(--secondary);
            color: white;
        }
        
        .action-buttons {
            display: flex;
            gap: 1rem;
            margin-top: 2rem;
        }
        
        /* REPORT CARD PREVIEW */
        .report-card {
            background: white;
            border-radius: 15px;
            padding: 2rem;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.08);
            border: 1px solid var(--gray);
            flex: 1;
            overflow-y: auto;
        }
        
        .report-header {
            text-align: center;
            margin-bottom: 2rem;
            padding-bottom: 1.5rem;
            border-bottom: 2px solid var(--primary);
        }
        
        .school-name {
            font-family: 'Poppins', sans-serif;
            font-size: 2rem;
            color: var(--secondary);
            margin-bottom: 0.5rem;
        }
        
        .report-title {
            font-size: 1.5rem;
            color: var(--primary);
            margin-bottom: 1.5rem;
        }
        
        .student-info {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1rem;
            margin-bottom: 2rem;
        }
        
        .info-item {
            display: flex;
            margin-bottom: 0.5rem;
        }
        
        .info-label {
            font-weight: 600;
            min-width: 140px;
            color: var(--secondary);
        }
        
        .info-value {
            flex: 1;
        }
        
        /* MARKS TABLE */
        .marks-table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 2rem;
        }
        
        .marks-table th {
            background: var(--secondary);
            color: white;
            padding: 12px 15px;
            text-align: left;
            font-weight: 600;
        }
        
        .marks-table td {
            padding: 12px 15px;
            border-bottom: 1px solid var(--gray);
        }
        
        .marks-table tr:nth-child(even) {
            background: var(--light);
        }
        
        .grade-A { color: var(--success); font-weight: 600; }
        .grade-B { color: #3b82f6; font-weight: 600; }
        .grade-C { color: #f59e0b; font-weight: 600; }
        .grade-D { color: #f97316; font-weight: 600; }
        .grade-F { color: var(--danger); font-weight: 600; }
        
        /* SUMMARY */
        .summary {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 1.5rem;
            margin-top: 2rem;
        }
        
        .summary-box {
            background: var(--light);
            padding: 1.5rem;
            border-radius: 10px;
            text-align: center;
            border-top: 4px solid var(--primary);
        }
        
        .summary-value {
            font-size: 2.2rem;
            font-weight: 700;
            color: var(--secondary);
            margin-bottom: 0.5rem;
        }
        
        .summary-label {
            font-size: 0.9rem;
            color: #64748b;
            font-weight: 500;
        }
        
        .performance {
            margin-top: 2rem;
            padding: 1.5rem;
            background: linear-gradient(135deg, #f0f9ff, #e0f2fe);
            border-radius: 10px;
            border-left: 4px solid var(--accent);
        }
        
        .performance h4 {
            color: var(--secondary);
            margin-bottom: 0.5rem;
        }
        
        /* FOOTER */
        footer {
            background: var(--secondary);
            color: white;
            padding: 1.5rem;
            text-align: center;
        }
        
        .footer-links {
            display: flex;
            justify-content: center;
            gap: 2rem;
            margin-bottom: 1rem;
        }
        
        .footer-links a {
            color: rgba(255, 255, 255, 0.8);
            text-decoration: none;
            transition: color 0.3s;
        }
        
        .footer-links a:hover {
            color: white;
        }
        
        /* PRINT STYLES */
        @media print {
            .form-section, .action-buttons, footer {
                display: none !important;
            }
            
            .preview-section {
                width: 100%;
                padding: 0;
            }
            
            .report-card {
                box-shadow: none;
                border: none;
                padding: 0;
            }
            
            .container {
                max-width: 100%;
                box-shadow: none;
                border-radius: 0;
            }
        }
        
        /* RESPONSIVE */
        @media (max-width: 992px) {
            .main-content {
                flex-direction: column;
            }
            
            .form-section {
                border-right: none;
                border-bottom: 1px solid var(--gray);
            }
            
            .student-info {
                grid-template-columns: 1fr;
            }
            
            .summary {
                grid-template-columns: repeat(2, 1fr);
            }
        }
        
        @media (max-width: 576px) {
            .form-row {
                flex-direction: column;
                gap: 0;
            }
            
            .summary {
                grid-template-columns: 1fr;
            }
            
            .action-buttons {
                flex-direction: column;
            }
            
            .logo h1 {
                font-size: 2rem;
            }
            
            .section-title {
                font-size: 1.5rem;
            }
        }
        
        /* ANIMATIONS */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .fade-in {
            animation: fadeIn 0.5s ease forwards;
        }
        
        /* LOADING STATE */
        .loading {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 3rem;
            color: var(--secondary);
        }
        
        .loading-spinner {
            border: 4px solid var(--gray);
            border-top: 4px solid var(--primary);
            border-radius: 50%;
            width: 50px;
            height: 50px;
            animation: spin 1s linear infinite;
            margin-bottom: 1rem;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- HEADER -->
        <header>
            <div class="logo">
                <div class="logo-icon">
                    <i class="fas fa-graduation-cap"></i>
                </div>
                <h1>EduTrack</h1>
            </div>
            <p class="header-subtitle">Generate professional student report cards with automatic grading system. Calculate percentages, assign grades, and create printable reports in seconds.</p>
        </header>
        
        <!-- MAIN CONTENT -->
        <div class="main-content">
            <!-- FORM SECTION -->
            <div class="form-section">
                <h2 class="section-title"><i class="fas fa-edit"></i> Student Information</h2>
                
                <form id="reportForm">
                    <div class="form-row">
                        <div class="form-group">
                            <label for="studentName"><i class="fas fa-user"></i> Full Name</label>
                            <input type="text" id="studentName" placeholder="Enter student's full name" required>
                        </div>
                        <div class="form-group">
                            <label for="rollNumber"><i class="fas fa-id-card"></i> Roll Number</label>
                            <input type="text" id="rollNumber" placeholder="e.g., 2023001" required>
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="className"><i class="fas fa-school"></i> Class & Section</label>
                            <input type="text" id="className" placeholder="e.g., Class 6A" required>
                        </div>
                        <div class="form-group">
                            <label for="academicYear"><i class="fas fa-calendar-alt"></i> Academic Year</label>
                            <input type="text" id="academicYear" placeholder="e.g., 2023-2024" value="2023-2024" required>
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="schoolName"><i class="fas fa-university"></i> School Name</label>
                            <input type="text" id="schoolName" placeholder="Enter school name" value="Greenwood International School" required>
                        </div>
                        <div class="form-group">
                            <label for="teacherName"><i class="fas fa-chalkboard-teacher"></i> Class Teacher</label>
                            <input type="text" id="teacherName" placeholder="Enter teacher's name" required>
                        </div>
                    </div>
                    
                    <h2 class="section-title" style="margin-top: 2.5rem;"><i class="fas fa-book"></i> Subject Marks</h2>
                    <p style="margin-bottom: 1rem; color: #64748b;">Enter marks for each subject (out of 100)</p>
                    
                    <div id="subjectsContainer">
                        <!-- Subjects will be added here dynamically -->
                        <div class="subject-row">
                            <div class="form-group subject-name">
                                <input type="text" class="subjectInput" placeholder="Subject name" value="English" required>
                            </div>
                            <div class="form-group subject-marks">
                                <input type="number" class="marksInput" placeholder="Marks" min="0" max="100" value="85" required>
                            </div>
                            <button type="button" class="remove-subject" disabled>
                                <i class="fas fa-times"></i>
                            </button>
                        </div>
                        
                        <div class="subject-row">
                            <div class="form-group subject-name">
                                <input type="text" class="subjectInput" placeholder="Subject name" value="Mathematics" required>
                            </div>
                            <div class="form-group subject-marks">
                                <input type="number" class="marksInput" placeholder="Marks" min="0" max="100" value="92" required>
                            </div>
                            <button type="button" class="remove-subject">
                                <i class="fas fa-times"></i>
                            </button>
                        </div>
                        
                        <div class="subject-row">
                            <div class="form-group subject-name">
                                <input type="text" class="subjectInput" placeholder="Subject name" value="Science" required>
                            </div>
                            <div class="form-group subject-marks">
                                <input type="number" class="marksInput" placeholder="Marks" min="0" max="100" value="78" required>
                            </div>
                            <button type="button" class="remove-subject">
                                <i class="fas fa-times"></i>
                            </button>
                        </div>
                    </div>
                    
                    <div class="add-subject" id="addSubject">
                        <i class="fas fa-plus"></i> Add Another Subject
                    </div>
                    
                    <div class="action-buttons">
                        <button type="button" class="btn btn-primary" id="generateReport">
                            <i class="fas fa-file-alt"></i> Generate Report Card
                        </button>
                        <button type="button" class="btn btn-outline" id="resetForm">
                            <i class="fas fa-redo"></i> Reset Form
                        </button>
                    </div>
                </form>
            </div>
            
            <!-- PREVIEW SECTION -->
            <div class="preview-section">
                <h2 class="section-title"><i class="fas fa-eye"></i> Report Card Preview</h2>
                
                <div id="loadingPreview" class="loading" style="display: none;">
                    <div class="loading-spinner"></div>
                    <p>Generating report card...</p>
                </div>
                
                <div id="reportPreview" class="report-card">
                    <!-- Report card will be generated here -->
                    <div class="report-header">
                        <h2 class="school-name">Greenwood International School</h2>
                        <h3 class="report-title">STUDENT REPORT CARD</h3>
                        <p>Academic Year: 2023-2024</p>
                    </div>
                    
                    <div class="student-info">
                        <div class="info-item">
                            <span class="info-label">Student Name:</span>
                            <span class="info-value" id="previewName">John Doe</span>
                        </div>
                        <div class="info-item">
                            <span class="info-label">Roll Number:</span>
                            <span class="info-value" id="previewRoll">2023001</span>
                        </div>
                        <div class="info-item">
                            <span class="info-label">Class & Section:</span>
                            <span class="info-value" id="previewClass">Class 6A</span>
                        </div>
                        <div class="info-item">
                            <span class="info-label">Class Teacher:</span>
                            <span class="info-value" id="previewTeacher">Ms. Sarah Johnson</span>
                        </div>
                    </div>
                    
                    <table class="marks-table">
                        <thead>
                            <tr>
                                <th>Subject</th>
                                <th>Marks Obtained</th>
                                <th>Out of 100</th>
                                <th>Grade</th>
                            </tr>
                        </thead>
                        <tbody id="marksTableBody">
                            <!-- Marks will be populated here -->
                            <tr>
                                <td>English</td>
                                <td>85</td>
                                <td>100</td>
                                <td class="grade-A">A</td>
                            </tr>
                            <tr>
                                <td>Mathematics</td>
                                <td>92</td>
                                <td>100</td>
                                <td class="grade-A">A</td>
                            </tr>
                            <tr>
                                <td>Science</td>
                                <td>78</td>
                                <td>100</td>
                                <td class="grade-C">C</td>
                            </tr>
                        </tbody>
                    </table>
                    
                    <div class="summary">
                        <div class="summary-box">
                            <div class="summary-value" id="totalMarks">255</div>
                            <div class="summary-label">Total Marks</div>
                        </div>
                        <div class="summary-box">
                            <div class="summary-value" id="percentage">85%</div>
                            <div class="summary-label">Percentage</div>
                        </div>
                        <div class="summary-box">
                            <div class="summary-value" id="overallGrade" class="grade-A">A</div>
                            <div class="summary-label">Overall Grade</div>
                        </div>
                    </div>
                    
                    <div class="performance">
                        <h4><i class="fas fa-chart-line"></i> Performance Summary</h4>
                        <p id="performanceText">John has performed excellently this term, showing consistent improvement across all subjects. Strong performance in Mathematics and English.</p>
                    </div>
                    
                    <div style="margin-top: 2rem; display: flex; justify-content: space-between; padding-top: 1.5rem; border-top: 1px solid var(--gray);">
                        <div>
                            <p style="font-weight: 600;">Class Teacher's Signature</p>
                            <p style="margin-top: 2rem;">_______________________</p>
                        </div>
                        <div>
                            <p style="font-weight: 600;">Principal's Signature</p>
                            <p style="margin-top: 2rem;">_______________________</p>
                        </div>
                    </div>
                </div>
                
                <div class="action-buttons" style="margin-top: 2rem;">
                    <button class="btn btn-secondary" id="printReport">
                        <i class="fas fa-print"></i> Print Report Card
                    </button>
                    <button class="btn btn-primary" id="downloadPDF">
                        <i class="fas fa-download"></i> Download as PDF
                    </button>
                </div>
            </div>
        </div>
        
        <!-- FOOTER -->
        <footer>
            <div class="footer-links">
                <a href="#"><i class="fas fa-question-circle"></i> Help</a>
                <a href="#"><i class="fas fa-shield-alt"></i> Privacy</a>
                <a href="#"><i class="fas fa-envelope"></i> Contact</a>
            </div>
            <p>© 2023 EduTrack Report Card Generator. All rights reserved.</p>
        </footer>
    </div>

    <script>
        // DOM Elements
        const reportForm = document.getElementById('reportForm');
        const subjectsContainer = document.getElementById('subjectsContainer');
        const addSubjectBtn = document.getElementById('addSubject');
        const generateReportBtn = document.getElementById('generateReport');
        const resetFormBtn = document.getElementById('resetForm');
        const printReportBtn = document.getElementById('printReport');
        const downloadPDFBtn = document.getElementById('downloadPDF');
        const loadingPreview = document.getElementById('loadingPreview');
        const reportPreview = document.getElementById('reportPreview');
        
        // Grading system
        const gradingSystem = [
            { min: 90, max: 100, grade: 'A', remark: 'Excellent' },
            { min: 80, max: 89, grade: 'B', remark: 'Very Good' },
            { min: 70, max: 79, grade: 'C', remark: 'Good' },
            { min: 60, max: 69, grade: 'D', remark: 'Satisfactory' },
            { min: 40, max: 59, grade: 'E', remark: 'Pass' },
            { min: 0, max: 39, grade: 'F', remark: 'Fail' }
        ];
        
        // Performance remarks
        const performanceRemarks = [
            "has shown exceptional dedication and performance this term. Keep up the excellent work!",
            "has performed very well with consistent effort across all subjects. Continue to strive for excellence.",
            "has shown good progress this term. With more focus, even better results can be achieved.",
            "has passed all subjects. Additional effort and regular study will help improve performance.",
            "needs to focus more on studies and complete assignments regularly to improve results."
        ];
        
        // Initialize with sample data
        document.addEventListener('DOMContentLoaded', function() {
            generateReport();
        });
        
        // Add subject row
        addSubjectBtn.addEventListener('click', function() {
            const subjectRow = document.createElement('div');
            subjectRow.className = 'subject-row fade-in';
            subjectRow.innerHTML = `
                <div class="form-group subject-name">
                    <input type="text" class="subjectInput" placeholder="Subject name" required>
                </div>
                <div class="form-group subject-marks">
                    <input type="number" class="marksInput" placeholder="Marks" min="0" max="100" required>
                </div>
                <button type="button" class="remove-subject">
                    <i class="fas fa-times"></i>
                </button>
            `;
            
            subjectsContainer.appendChild(subjectRow);
            
            // Add event listener to the new remove button
            const removeBtn = subjectRow.querySelector('.remove-subject');
            removeBtn.addEventListener('click', function() {
                subjectRow.remove();
                // Generate report after removal
                setTimeout(generateReport, 100);
            });
            
            // Add input event listeners to new fields
            const subjectInput = subjectRow.querySelector('.subjectInput');
            const marksInput = subjectRow.querySelector('.marksInput');
            
            subjectInput.addEventListener('input', generateReport);
            marksInput.addEventListener('input', generateReport);
            
            // Focus on the new subject input
            subjectInput.focus();
        });
        
        // Add event listeners to existing remove buttons
        document.querySelectorAll('.remove-subject').forEach(btn => {
            if (!btn.disabled) {
                btn.addEventListener('click', function() {
                    this.closest('.subject-row').remove();
                    // Generate report after removal
                    setTimeout(generateReport, 100);
                });
            }
        });
        
        // Generate report card
        generateReportBtn.addEventListener('click', generateReport);
        
        // Reset form
        resetFormBtn.addEventListener('click', function() {
            if (confirm('Are you sure you want to reset the form? All data will be lost.')) {
                reportForm.reset();
                
                // Clear all but first subject row
                const subjectRows = subjectsContainer.querySelectorAll('.subject-row');
                for (let i = 1; i < subjectRows.length; i++) {
                    subjectRows[i].remove();
                }
                
                // Reset first subject row
                const firstSubjectInput = subjectsContainer.querySelector('.subjectInput');
                const firstMarksInput = subjectsContainer.querySelector('.marksInput');
                
                firstSubjectInput.value = 'English';
                firstMarksInput.value = '85';
                
                // Generate default report
                generateReport();
            }
        });
        
        // Print report card
        printReportBtn.addEventListener('click', function() {
            window.print();
        });
        
        // Download as PDF (simulated)
        downloadPDFBtn.addEventListener('click', function() {
            // In a real implementation, you would use a library like jsPDF
            // For now, we'll show a simulated download
            this.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Generating PDF...';
            this.disabled = true;
            
            setTimeout(() => {
                alert('PDF download started! In a real implementation, this would download the report card as a PDF file.');
                this.innerHTML = '<i class="fas fa-download"></i> Download as PDF';
                this.disabled = false;
            }, 1500);
        });
        
        // Generate report function
        function generateReport() {
            // Show loading
            loadingPreview.style.display = 'flex';
            reportPreview.style.opacity = '0.5';
            
            // Simulate processing delay
            setTimeout(() => {
                // Get form values
                const studentName = document.getElementById('studentName').value || 'John Doe';
                const rollNumber = document.getElementById('rollNumber').value || '2023001';
                const className = document.getElementById('className').value || 'Class 6A';
                const academicYear = document.getElementById('academicYear').value || '2023-2024';
                const schoolName = document.getElementById('schoolName').value || 'Greenwood International School';
                const teacherName = document.getElementById('teacherName').value || 'Ms. Sarah Johnson';
                
                // Get subjects and marks
                const subjectInputs = document.querySelectorAll('.subjectInput');
                const marksInputs = document.querySelectorAll('.marksInput');
                
                let subjects = [];
                let totalMarks = 0;
                let subjectCount = 0;
                
                for (let i = 0; i < subjectInputs.length; i++) {
                    const subject = subjectInputs[i].value.trim();
                    const marks = parseInt(marksInputs[i].value) || 0;
                    
                    if (subject && !isNaN(marks)) {
                        const grade = calculateGrade(marks);
                        subjects.push({
                            name: subject,
                            marks: marks,
                            grade: grade.grade,
                            gradeClass: `grade-${grade.grade}`
                        });
                        
                        totalMarks += marks;
                        subjectCount++;
                    }
                }
                
                // Calculate percentage
                const percentage = subjectCount > 0 ? Math.round((totalMarks / (subjectCount * 100)) * 100) : 0;
                const overallGrade = calculateGrade(percentage);
                
                // Update preview
                document.getElementById('previewName').textContent = studentName;
                document.getElementById('previewRoll').textContent = rollNumber;
                document.getElementById('previewClass').textContent = className;
                document.getElementById('previewTeacher').textContent = teacherName;
                document.querySelector('.school-name').textContent = schoolName;
                document.querySelector('.report-header p').textContent = `Academic Year: ${academicYear}`;
                
                // Update marks table
                const marksTableBody = document.getElementById('marksTableBody');
                marksTableBody.innerHTML = '';
                
                subjects.forEach(subject => {
                    const row = document.createElement('tr');
                    row.className = 'fade-in';
                    row.innerHTML = `
                        <td>${subject.name}</td>
                        <td>${subject.marks}</td>
                        <td>100</td>
                        <td class="${subject.gradeClass}">${subject.grade}</td>
                    `;
                    marksTableBody.appendChild(row);
                });
                
                // Update summary
                document.getElementById('totalMarks').textContent = totalMarks;
                document.getElementById('percentage').textContent = `${percentage}%`;
                
                const overallGradeElement = document.getElementById('overallGrade');
                overallGradeElement.textContent = overallGrade.grade;
                overallGradeElement.className = `summary-value grade-${overallGrade.grade}`;
                
                // Update performance text
                let performanceIndex;
                if (percentage >= 85) performanceIndex = 0;
                else if (percentage >= 70) performanceIndex = 1;
                else if (percentage >= 55) performanceIndex = 2;
                else if (percentage >= 40) performanceIndex = 3;
                else performanceIndex = 4;
                
                const performanceText = document.getElementById('performanceText');
                performanceText.textContent = `${studentName} ${performanceRemarks[performanceIndex]}`;
                
                // Hide loading and show preview
                loadingPreview.style.display = 'none';
                reportPreview.style.opacity = '1';
                
                // Add fade-in animation to new content
                document.querySelectorAll('.fade-in').forEach(el => {
                    el.style.animation = 'fadeIn 0.5s ease forwards';
                });
                
            }, 800);
        }
        
        // Calculate grade based on marks
        function calculateGrade(marks) {
            for (const grade of gradingSystem) {
                if (marks >= grade.min && marks <= grade.max) {
                    return grade;
                }
            }
            return gradingSystem[gradingSystem.length - 1]; // Return 'F' if no match
        }
        
        // Add input event listeners to form fields
        document.querySelectorAll('#reportForm input').forEach(input => {
            input.addEventListener('input', generateReport);
        });
        
        // Add input event listeners to existing subject inputs
        document.querySelectorAll('.subjectInput, .marksInput').forEach(input => {
            input.addEventListener('input', generateReport);
        });
    </script>
</body>
</html>
